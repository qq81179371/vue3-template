(function() {
    'use strict';
    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');
    let curNode = null

    var register$1 = function(editor) {

        //添加到工具栏
        editor.ui.registry.addButton('metapackage', {
            icon: 'remove',
            tooltip: '删除',
            onAction: function(e) {
                //获取光标所在内容
                //tinymce.activeEditor.selection
                //获取其父节点，直到获取到editor_items_tyle
                //(找不到父级对象，只能定义全局变量，从上下文中获取了)
                //删除

                curNode.remove()
                editor.execCommand('delete');
            }
        });

        //添加到上下文菜单
        editor.ui.registry.addContextToolbar('metapackageContextToolbar', {
            predicate: function(node) {
                //console.log(node, node.className)
                if (node.className === '_1651editor') {
                    curNode = node
                    return true
                } else {
                    return false
                }
                //return node.className === 'editor_items_tyle'
            },
            items: 'metapackage',
            position: 'node',
            scope: 'node'
        });

    };
    var Buttons = { register: register$1 };

    function Plugin() {
        global.add('metapackage', function(editor) {
            Buttons.register(editor);
        });
    }
    Plugin();
}());